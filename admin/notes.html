find the key 

{{ trim (index (findRE `([^//]+)//?$` (index (findRE `([^//]+)\/[^//]+\/?$` .RelPermalink ) 0)) 0 ) "/" }}

the section or base name
{{ (path.Base (path.Split .Path).Dir) }}

the last url part
{{ (path.Base .RelPermalink) }}

print tags
{{ range $i, $e := .Params.tags }}{{ if $i }}, {{ end }}{{ $e }}{{ end }}

first in array
{{ feature := index (.Params.features ) 0 }}


<a href={{ .Destination | safeURL }}
    {{ if strings.HasPrefix .Destination "mailto" -}} target=_blank {{end}}
    {{ if strings.HasPrefix .Destination "http" -}} target=_blank rel="noopener noreferrer" {{- end }}
>{{ .PlainText | htmlEscape }}</a>


<!-- image(s) -->
{{ range first 1 ((.Resources.ByType "image").Match "banner*") }} 
<a href="/interests/{{ (path.Base .RelPermalink) }}">
<img class="lazyload" itemprop="image" data-src="{{ .RelPermalink }}" alt="{{ substr .Title  0 -4 | humanize }}">
</a> 
{{ end }}   

{{- with .Resources.ByType "image" }}
{{- range $index,$img := . }}
{{ path.Dir .RelPermalink }} {{ len .Permalink }} <br>
{{- if eq $index 0}}
 <a href="/interests/{{ (path.Base .RelPermalink) }}">
<img class="lazyload" itemprop="image" data-src="{{ .RelPermalink }}" alt="{{ substr .Title  0 -4 | humanize }}">
{{- end }}
{{- end }}  
{{- end }}

 {{ if not (findRE "banner" .RelPermalink 1) }} 
 {{ if eq (len (path.Dir .RelPermalink)) (len (path.Dir $.RelPermalink )) }}