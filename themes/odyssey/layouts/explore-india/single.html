{{- define "template" }}
{{- if ne (getenv "HUGO_ENV") "production" -}}

{{- partial "show-template" (dict "Which" .Kind "Template" "layouts/explore-india/single.html") -}}

{{- end }}
{{- end }}

{{ define "main" }}
{{ "<!-- The CONTENT Now -->" | safeHTML }}
{{- $id := cond (isset .Params "id") .Params.id .CurrentSection.Params.translationKey }}
      
<section id="{{ $id | lower }}">
  {{ partial "heading.html" . }}
  <div class="container">
    <div class="row">
      <div class="mx-auto w-50 p-1">
        {{.Content}}
      </div>
    </div>
    <div clas="center">
      <form id="selectForm" action="#" >
        <div  class="select-flex">
          <div class="custom-select">
            <label for="cities">Search by name</label>
            <select name="cities" id="url">
              {{ range (where (where .Site.Pages "Section" "states").ByTitle ".Params.id" "city") }}
                <option value="{{ .Permalink }}">{{ .Title }} </option>
              {{ end }}
            </select>
          </div>
          <div>
            <input type="button" name="submit" id="btn_id" value="Submit" onclick="submit_by_id()"/>
          </div>
        </div>
      </form>  
      <form id="selectForm" action="#" >
        <div  class="select-flex">
          <div class="custom-select">
            <label for="cities">Search by interest</label>
            <select name="cities" id="url">
              {{ range (where (where .Site.Pages "Section" "states").ByTitle ".Params.id" "interest") }}
                <option value="{{ .Permalink }}">{{ .Title }} </option>
              {{ end }}
            </select>
          </div>
          <div>
            <input type="button" name="submit" id="btn_id" value="Submit" onclick="submit_by_id()"/>
          </div>
        </div>
      </form>  
    </div>
  </div>
  <div class="bg">
    <div class="mx-auto w-50 p-1 center">
      {{.Content }}
    </div>
    <div class="card-deck">
      <div class="row row-cols-1 row-cols-md-3">
        {{- range .Params.cities}}
        {{- with $.Site.GetPage . }}
        <div class="card-spacing">
          <div class="card h-100">
              <!-- header -->
              <div class="card-header img-top">
              {{- with .Resources.ByType "image" }}
                <div class="Image">
                {{- range $index,$img := . }}
                {{- if eq $index 0}}
                  <img src="{{ $img.RelPermalink }}">
                {{- end }}
                {{- end }}
                </div>
              {{- end }}
              </div>   
              <!-- body -->   
              <div class="card-body">
                <h3 class="card-title">
                  <a href="{{ .Permalink }}">{{ .Title }}</a>
                </h3>     
                <h4>{{ .Params.subtitle }}</h4> 
                <p class="card-text">
                  <span itemprop="description">{{ .Summary }}</span>
                </p>
            </div>
          </div>
        </div>     
        {{- end }}
        {{- end }}
      </div>
    </div>
  </div>
</section>
{{- end }}